<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
        <link href="/css/site.css" type="text/css" rel="stylesheet"/>
        <link rel="stylesheet" href="/css/syntax.css" type="text/css" />
        <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom feed">
        <title>(think) - A peek at Emacs 24</title>

        <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-22917580-1']);
            _gaq.push(['_trackPageview']);

            (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();

        </script>
    </head>

    <body>
        <div id="page">
            <div id="content">
                <div id="header">
                    <h1>(think)</h1>
                    <p class="comment">/** An online novel about the Source, the Force, the real life and everything
                    in between...**/</p>
                </div>
                <div id="middle">
                    <div id="menu">
                        <ul id="list-nav">
                            <li><a href="/index.html">Home</a></li>
                            <li><a href="/archive.html">Archive</a></li>
                            <li><a href="/projects.html">Projects</a></li>
                            <li><a href="/about.html">About</a></li>
                            <li><a href="/contacts.html">Contacts</a></li>
                        </ul>
                    </div>
                    <div id="content">
                        <div id="post">
    <h2 class="title">A peek at Emacs 24</h2>
    <h1 id="overture">Overture</h1>

<p>Recently I’ve decided to have a look at the current development
version of Emacs - namely Emacs 24. I was quite impressed with the work done
by the development team so far so I decided to share some of the cool things
I’ve found in Emacs 24.</p>

<p>It seems to me that this will be the most important Emacs release in
quite some time.</p>

<h1 id="installation-changes-in-emacs-24">Installation changes in Emacs 24</h1>

<p>There are a couple of new build flags support in Emacs 24 - most
notably there is GTK 3.0 support present. You can enable it by passing
the <strong>–with-x-toolkit=gtk3</strong> flag to <em>configure</em>. There is also built-in
support for selinux (that can be disabled at build time) and the
installed info and man pages are now compressed by default.</p>

<p>All in all - nothing major has changed with the installation process.</p>

<h1 id="general-changes">General changes</h1>

<h2 id="completion-improvements">Completion improvements</h2>

<p>There has been a lot of work done in the completion department. For
instance <strong>shell-mode</strong> now uses pcomplete rules and the standard
completion UI, which is pretty cool IMHO. Some other insteresting
improvements (mostly copied directly from Emacs’ NEWS files):</p>

<ul>
  <li>Many packages have been changed to use <em>completion-at-point</em> rather than
their own completion code.</li>
  <li>Completion in a non-minibuffer now tries to detect the end of completion
and pops down the *Completions* buffer accordingly.</li>
  <li>Completion can cycle, depending on completion-cycle-threshold.</li>
  <li>There is a new completion style called <em>substring</em>.</li>
  <li>Completion style can be set per-category with <em>completion-category-overrides</em>.</li>
  <li>Completion of buffers now uses substring completion by default.</li>
  <li><em>completing-read</em> can be customized using the new variable
<em>completing-read-function</em>.</li>
  <li><em>minibuffer-local-filename-must-match-map</em> is not used any more.
Instead, the bindings in <em>minibuffer-local-filename-completion-map</em> are combined
with minibuffer-local-must-match-map.</li>
</ul>

<h2 id="scrolling-improvements">Scrolling improvements</h2>

<p>Scrolling has always been a sour subject in Emacs. Emacs 24 finally
alleviates many of the long standing issues in the scrolling department:</p>

<ul>
  <li>
    <p>New scrolling commands <em>scroll-up-command</em> and <em>scroll-down-command</em>
(bound to C-v/[next] and M-v/[prior]) do not signal errors at top/bottom
of buffer at first key-press (instead move to top/bottom of buffer)
when a new variable <em>scroll-error-top-bottom</em> is non-nil.</p>
  </li>
  <li>
    <p>New scrolling commands <em>scroll-up-line</em> and <em>scroll-down-line</em>
scroll a line instead of full screen.</p>
  </li>
  <li>
    <p>New property <em>scroll-command</em> should be set on a command’s symbol to
define it as a scroll command affected by <em>scroll-preserve-screen-position</em>.</p>
  </li>
  <li>
    <p>If you customize <em>scroll-conservatively</em> to a value greater than 100,
Emacs will never recenter point in the window when it scrolls due to
cursor motion commands or commands that move point (e.f., <em>M-g M-g</em>).
Previously, you needed to use <em>most-positive-fixnum</em> as the value of
<em>scroll-conservatively</em> to achieve the same effect.</p>
  </li>
  <li>
    <p><strong>Aggressive</strong> scrolling now honors the scroll margins.
If you customize <em>scroll-up-aggressively</em> or
<em>scroll-down-aggressively</em> and move point off the window, Emacs now
scrolls the window so as to avoid positioning point inside the scroll
margin.</p>
  </li>
</ul>

<h2 id="gtk-improvements">GTK improvements</h2>

<p>Linux users are in for a treat:</p>

<ul>
  <li>GTK scroll bars are finally placed on the right by default. 
You can still use <em>set-scroll-bar-mode</em> to change this.</li>
  <li>GTK tool bars can have just text, just images or images and text.
Customize <em>tool-bar-style</em> to choose style.  On a Gnome desktop, the default
is taken from the desktop settings.</li>
  <li>GTK tool bars can be placed on the left/right or top/bottom of the frame.
The frame-parameter tool-bar-position controls this.  It takes the values
top, left, right or bottom.  The <strong>Options =&gt; Show/Hide</strong> menu has entries
for this.</li>
  <li>The colors for selected text (the region face) are taken from the GTK
theme when Emacs is built with GTK.</li>
  <li>Emacs uses GTK tooltips by default if built with GTK.  You can turn that
off by customizing x-gtk-use-system-tooltips.</li>
</ul>

<h2 id="cocoa-os-x-improvements">Cocoa (OS X improvements)</h2>

<p>OS X users seem to be a bit neglected, but still:</p>

<ul>
  <li>the annoying bug with the cursor not having an inverse video face
(meaning you couldn’t see the symbol under it) is finally fixed</li>
  <li>the menu bar can be hidden by customizing
ns-auto-hide-menu-bar.</li>
</ul>

<h2 id="elpa-a-package-manager-for-emacs">ELPA (a package manager for Emacs)</h2>

<ul>
  <li>
    <p>An Emacs Lisp package manager (aka ELPA) is now included.
This is a convenient way to download and install additional packages,
from a package repository at elpa.gnu.org.</p>
  </li>
  <li>
    <p>The addition of external repositories is also supported ( I’m
particularly fond of the <a href="http://marmalade-repo.org/">Marmalade repo</a>)</p>
  </li>
  <li>
    <p><em>M-x list-packages</em> shows a list of packages, which can be
selected for installation.</p>
  </li>
  <li>
    <p>New command <em>describe-package</em>, bound to <em>C-h P</em>.</p>
  </li>
  <li>
    <p>By default, all installed packages are loaded and activated
automatically when Emacs starts up.  To disable this, set
<em>package-enable-at-startup</em> to nil.  To change which packages are
loaded, customize <em>package-load-list</em>.</p>
  </li>
</ul>

<p>I’m personally a little bit underwhelmed by ELPA at this point. It
lacks something that I deem rather critical - the ability to upgrade
already installed packages automatically. Hopefully, this deficiency
will be amended in the near future.</p>

<p>There is also the restrictive licensing restriction that GNU enforces
that will certainly prevent a lot of packages from being distributed
via the official ELPA repo.</p>

<h2 id="custom-color-themes">Custom color themes</h2>

<p>Most hackers are very fond of custom color themes. I’m no exception -
after all I’m the maintainer of the <a href="https://github.com/bbatsov/zenburn-emacs">Zenburn color theme for Emacs</a>. The
problems with custom color themes so far was that depended on the
horrible external package color-theme, that wasn’t maintained
particularly actively in the past few years.</p>

<p>Now Emacs 24 comes with a built-in theming infrastructure
affectionately called <strong>deftheme</strong> and several quite nice themes that
Emacs users can choose from (like tango). I’ve already ported Zenburn to the
deftheme infrastructure, so if you like it be sure to give it a
try. The magic command you’ll need to keep in mind is called <em>load-theme</em>.</p>

<h1 id="editing-improvements">Editing improvements</h1>

<p>Emacs is after all mostly an editor and there is a lot of work done in
the editing area in 24:</p>

<h2 id="search-changes">Search changes</h2>

<ul>
  <li>
    <p>C-y in Isearch is now bound to isearch-yank-kill, instead of
isearch-yank-line.</p>
  </li>
  <li>
    <p>M-y in Isearch is now bound to isearch-yank-pop, instead of
isearch-yank-kill.</p>
  </li>
  <li>
    <p>M-s C-e in Isearch is now bound to isearch-yank-line.</p>
  </li>
</ul>

<h2 id="general">General</h2>
<ul>
  <li>
    <p>There is a new command <em>count-words-region</em>, which does what you expect.</p>
  </li>
  <li>
    <p><em>completion-at-point</em> now handles tags and semantic completion.</p>
  </li>
  <li>
    <p>The default value of <em>backup-by-copying-when-mismatch</em> is now t.</p>
  </li>
  <li>
    <p>The command <em>just-one-space</em> (C-SPC), if given a negative argument,
also deletes newlines around point.</p>
  </li>
</ul>

<h2 id="deletion-changes">Deletion changes</h2>

<ul>
  <li>
    <p>New option <em>delete-active-region</em>.
If non-nil, C-d, [delete], and DEL delete the region if it is active
and no prefix argument is given.  If set to <em>kill</em>, these commands
kill instead.</p>
  </li>
  <li>
    <p>New command <em>delete-forward-char</em>, bound to C-d and [delete].
This is meant for interactive use, and obeys <em>delete-active-region</em>.
The command <em>delete-char</em> does not obey <em>delete-active-region</em>.</p>
  </li>
  <li>
    <p><em>delete-backward-char</em> is now a Lisp function.
Apart from obeying <em>delete-active-region</em>, its behavior is unchanged.
However, the byte compiler now warns if it is called from Lisp; you
should use delete-char with a negative argument instead.</p>
  </li>
  <li>
    <p>The option <em>mouse-region-delete-keys</em> has been deleted.</p>
  </li>
</ul>

<h2 id="selection-changes">Selection changes</h2>

<p>The default handling of clipboard and primary selections was changed
to conform with modern X applications.  In short, most commands for
killing and yanking text now use the clipboard, while mouse commands
use the primary selection.</p>

<p>In the following, we provide a list of these changes, followed by a
list of steps to get the old behavior back if you prefer that.</p>

<ul>
  <li>
    <p><em>select-active-regions</em> now defaults to t.
Merely selecting text (e.g. with drag-mouse-1) no longer puts it in
the kill ring.  The selected text is put in the primary selection, if
the system possesses a separate primary selection facility (e.g. X).</p>
  </li>
  <li>
    <p><em>select-active-regions</em> also accepts a new value, <em>only</em>.
This means to only set the primary selection for temporarily active
regions (usually made by mouse-dragging or shift-selection);
“ordinary” active regions, such as those made with C-SPC followed by
point motion, do not alter the primary selection.</p>
  </li>
  <li>
    <p><em>mouse-drag-copy-region</em> now defaults to nil.</p>
  </li>
  <li>
    <p>mouse-2 is now bound to <em>mouse-yank-primary</em>.
This pastes from the primary selection, ignoring the kill-ring.
Previously, mouse-2 was bound to <em>mouse-yank-at-click</em>.</p>
  </li>
  <li><em>x-select-enable-clipboard</em> now defaults to t on all platforms.</li>
  <li>
    <p><em>x-select-enable-primary</em> now defaults to nil.
Thus, commands that kill text or copy it to the kill-ring (such as
M-w, C-w, and C-k) also use the clipboard—not the primary selection.</p>
  </li>
  <li>
    <p>The “Copy”, “Cut”, and “Paste” items in the “Edit” menu are now
exactly equivalent to, respectively M-w, C-w, and C-y.</p>
  </li>
  <li>
    <p>Note that on MS-Windows, <em>x-select-enable-clipboard</em> was already
non-nil by default, as Windows does not support the primary selection
between applications.</p>
  </li>
  <li>
    <p>Support for X cut buffers has been removed.</p>
  </li>
  <li>
    <p>Support for X clipboard managers has been added.</p>
  </li>
  <li>To inhibit use of the clipboard manager, set
<em>x-select-enable-clipboard-manager</em> to nil.</li>
</ul>

<h1 id="new-modes">New modes</h1>

<ul>
  <li>
    <p>Occur Edit mode applies edits made in *Occur* buffers to the
original buffers.  It is bound to C-x C-q in Occur mode. This
basically removes the need for an external package such as iedit.el.</p>
  </li>
  <li>
    <p>New global minor modes electric-pair-mode, electric-indent-mode,
and electric-layout-mode. One of my favourite new
additions. electric-pair-mode renders obsolete the popular
autopair-mode and electric-indent-mode and electric-layout-mode
provide a much more IDE feel to editing experience in Emacs. These
triumvirate of modes has been a long time coming</p>
  </li>
  <li>
    <p>secrets.el is an implementation of the Secret Service API, an
interface to password managers like GNOME Keyring or KDE Wallet.  The
Secret Service API requires D-Bus for communication.  The command
<em>secrets-show-secrets</em> offers a buffer with a visualization of the
secrets.</p>
  </li>
  <li>
    <p>notifications.el provides an implementation of the Desktop
Notifications API.  It requires D-Bus for communication.</p>
  </li>
  <li>
    <p>soap-client.el supports access to SOAP web services from Emacs.
soap-inspect.el is an interactive inspector for SOAP WSDL structures.</p>
  </li>
</ul>

<h1 id="epilogue">Epilogue</h1>

<p>Emacs 24 brings quite a lot to the table. I’ve barely scratch the
surface as far as the new features are concerned. There is so much
more - improvements to lots of the existing modes (most notably much
better support for distributed VC systems such as Git, Mercurial and
Bazaar), internal cleanups and improvements, etc.</p>

<p>I truly feel that Emacs 24 will be the most important Emacs release in
a long long time and I commend the new dev team leads for their
passion and resolve to modernize Emacs.</p>

<p>Expect future blog posts dedicated to specific new features and
improvements.</p>

<p>P.S. Btw <a href="https://github.com/bbatsov/emacs-dev-kit">The Emacs Dev Kit</a> already makes use of some the new
features from Emacs 24. In due time it will make use of much more of them.</p>

    <div class="meta">Posted on 19 Aug 2011 by Bozhidar. Filed under Emacs.</div>
    <br/>
        <span  class='st_reddit_large' ></span><span  class='st_linkedin_large' ></span><span  class='st_google_reader_large' ></span><span  class='st_dzone_large' ></span><span  class='st_digg_large' ></span><span  class='st_twitter_large' ></span><span  class='st_facebook_large' ></span><span  class='st_yahoo_large' ></span><span  class='st_gbuzz_large' ></span><span  class='st_email_large' ></span><span  class='st_sharethis_large' ></span>
    <hr />
    <div id="disqus">
        <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'batsov'; // required: replace example with your forum shortname

    // The following are highly recommended additional parameters. Remove the slashes in front to use.
    var disqus_identifier = document.location.href;
    var disqus_url = document.location.href;

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<script type="text/javascript">var switchTo5x=true;</script><script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script><script type="text/javascript">stLight.options({publisher:'e857ac4f-d3f6-4aa1-9e1f-06210ab5480e'});</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
</div>

                    </div>
                </div>
                <div id="footer">
                    Copyright &copy; 2010-2011 <a href="mailto:bozhidar.batsov@gmail.com">Bozhidar Batsov</a>. All Rights Reserved.
                    <br/>
                    Powered by <a href="http://jekyllrb.com/">Jekyll</a>.
                </div>
            </div>
            <div id="sidebar">
                <div id="twitter">
                    <script src="http://widgets.twimg.com/j/2/widget.js" type="text/javascript"></script>
                    <script type="text/javascript">
                        new TWTR.Widget({
                        version: 2,
                        type: 'profile',
                        rpp: 4,
                        interval: 6000,
                        width: 250,
                        height: 300,
                        theme: {
                        shell: {
                        background: '#333333',
                        color: '#ffffff'
                        },
                        tweets: {
                        background: '#000000',
                        color: '#ffffff',
                        links: '#4aed05'
                        }
                        },
                        features: {
                        scrollbar: false,
                        loop: false,
                        live: false,
                        hashtags: true,
                        timestamp: true,
                        avatars: false,
                        behavior: 'all'
                        }
                        }).render().setUser('bbatsov').start();
                    </script>
                </div>
                <div id="latest">
                    <div class="sidebar_heading">Latest posts:</div>
                    <ul>
                        
                        <li><a href="/Emacs/2011/08/19/a-peek-at-emacs24.html">A peek at Emacs 24</a></li>
                        
                        <li><a href="/Linux/Debian/2011/07/04/debian-tips.html">Debian post installation setup & tips</a></li>
                        
                        <li><a href="/Ruby/Rails/Python/Django/2011/06/19/django-vs-rails.html">Django 1.3 vs Rails 3: A not so final showdown</a></li>
                        
                        <li><a href="/Linux/Windows/Rant/2011/06/14/linux-desktop-part-2.html">The Linux desktop experience is killing Linux on the desktop, Part II</a></li>
                        
                        <li><a href="/Linux/Windows/Rant/2011/06/11/linux-desktop-experience-killing-linux-on-the-desktop.html">The Linux desktop experience is killing Linux on the desktop</a></li>
                        
                    </ul>
                </div>
                <div id="tags">
                    <div class="sidebar_heading">Categories:</div>
                    <ul>
                        
                        
                        <li><a href="/categories/Misc/index.html">Misc(6)</a></li>
                        
                        
                        <li><a href="/categories/Hardware/index.html">Hardware(4)</a></li>
                        
                        
                        <li><a href="/categories/Ruby/index.html">Ruby(6)</a></li>
                        
                        
                        <li><a href="/categories/Emacs/index.html">Emacs(8)</a></li>
                        
                        
                        <li><a href="/categories/Rails/index.html">Rails(2)</a></li>
                        
                        
                        <li><a href="/categories/Z Shell/index.html">Z Shell(3)</a></li>
                        
                        
                        <li><a href="/categories/Linux/index.html">Linux(12)</a></li>
                        
                        
                        <li><a href="/categories/Java/index.html">Java(13)</a></li>
                        
                        
                        <li><a href="/categories/Design Patterns/index.html">Design Patterns(1)</a></li>
                        
                        
                        <li><a href="/categories/IntelliJ/index.html">IntelliJ(1)</a></li>
                        
                        
                        <li><a href="/categories/Eclipse/index.html">Eclipse(1)</a></li>
                        
                        
                        <li><a href="/categories/Fedora/index.html">Fedora(5)</a></li>
                        
                        
                        <li><a href="/categories/Git/index.html">Git(1)</a></li>
                        
                        
                        <li><a href="/categories/JBoss/index.html">JBoss(1)</a></li>
                        
                        
                        <li><a href="/categories/Swing/index.html">Swing(2)</a></li>
                        
                        
                        <li><a href="/categories/NetBeans/index.html">NetBeans(1)</a></li>
                        
                        
                        <li><a href="/categories/LaTeX/index.html">LaTeX(1)</a></li>
                        
                        
                        <li><a href="/categories/Jekyll/index.html">Jekyll(2)</a></li>
                        
                        
                        <li><a href="/categories/Programming/index.html">Programming(5)</a></li>
                        
                        
                        <li><a href="/categories/Scala/index.html">Scala(2)</a></li>
                        
                        
                        <li><a href="/categories/Common Lisp/index.html">Common Lisp(2)</a></li>
                        
                        
                        <li><a href="/categories/Python/index.html">Python(2)</a></li>
                        
                        
                        <li><a href="/categories/Groovy/index.html">Groovy(1)</a></li>
                        
                        
                        <li><a href="/categories/Clojure/index.html">Clojure(1)</a></li>
                        
                        
                        <li><a href="/categories/Books/index.html">Books(1)</a></li>
                        
                        
                        <li><a href="/categories/Windows/index.html">Windows(2)</a></li>
                        
                        
                        <li><a href="/categories/Rant/index.html">Rant(2)</a></li>
                        
                        
                        <li><a href="/categories/Django/index.html">Django(1)</a></li>
                        
                        
                        <li><a href="/categories/Debian/index.html">Debian(1)</a></li>
                        
                    </ul>
                </div>
            </div>
        </div>
        <script type="text/javascript">
    var disqus_shortname = 'batsov'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
    </body>
</html>
